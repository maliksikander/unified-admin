<div *ngIf="spinner" class="loading-area" >
    <mat-spinner ></mat-spinner >
</div >
<div class="container main-custom-container" >
    <div class="row" >
        <div class="col-sm-12 p-0" >
            <div class="panel-body" >
                <div class="sub-heading" >
                    <h2>Teams</h2 >
                </div >
                <div class="routing-content panel-page-content" >
                    <div class="filter-section" >
                        <div class="form-group search-field" >
                            <mat-form-field appearance="outline" >
                                <input [(ngModel)]="searchTerm" matInput placeholder="Search" >
                                <mat-icon >search</mat-icon >
                            </mat-form-field >
                        </div >

                        <button (click)="addTeam(teamDialog)" mat-flat-button >
                            <mat-icon >add</mat-icon >
                            New Team
                        </button >
                    </div >

                    <div class="routing-table" >
                        <table class="table" >
                            <thead >
                            <tr >
                                <th scope="col" >Name</th >
                                <th scope="col" >Agents</th >
                                <th scope="col" >Supervisor (s)</th >
                                <th scope="col" >Created On</th >
                            </tr >
                            </thead >
                            <tbody *ngIf="teamData && teamData.length != 0" >
                                <tr  *ngFor="let data of teamData | filter:searchTerm | paginate: { itemsPerPage: itemsPerPage, currentPage: p }" >

                                    <td >{{data.name ? data.name : 'N/A'}}</td >
                                    <td>{{data.availableAgents ? data.availableAgents : 'N/A'}}</td>
                                    <td >
                                        <ng-container *ngFor=" let supervisor of data.supervisors" >{{supervisor.name }}, </ng-container >
                                    </td >
                                    <td class="table-trigger" >{{data.createdOn | date}}
                                        <span class="list-trigger-area" >
                                        <button (click)="editTeam(teamDialog,data)" mat-mini-fab matTooltip="Edit" >
                                        <!-- <i class="fa fa-pencil" aria-hidden="true"></i> -->
                                        <mat-icon >mode_edit</mat-icon >
                                        </button >
                                        <button (click)="deleteConfirm(data)" mat-mini-fab matTooltip="Delete" >
                                        <!-- <i class="fa fa-trash-o" aria-hidden="true"></i> -->
                                        <mat-icon >delete</mat-icon >
                                        </button >
                                        </span >
                                    </td >
                                </tr >

                            </tbody >

                            <div *ngIf="teamData && teamData.length == 0" class="no-data-warning" >
                                <i class="material-icons" >warning_amber</i >
                                <span >No Data Found</span >
                            </div >

                        </table >
                        <div *ngIf="teamData && teamData.length >= 6" class="pagination-section" >
                            <span class="page-span" >
                            <span >Entries Per Page</span >
                            <select [(ngModel)]="selectedItem" >
                            <option *ngFor="let item of itemsPerPageList" [value]="item" >{{ item }}
                            </option >
                            </select >
                            </span >
                            <pagination-controls (pageBoundsCorrection)="pageBoundChange($event)"
                                                 (pageChange)="p = $event;pageChange($event)" nextLabel="" previousLabel="" >
                            </pagination-controls >
                        </div >
                    </div >
                </div >
            </div >
        </div >
    </div >

    <ng-template #teamDialog >
        <div class="dialog-container" >
            <div class="mat-card-header" >
                <mat-icon (click)="onClose()" >close</mat-icon >
                <h4 class="content-span full-width" >{{formHeading}}</h4 >
            </div >
            <div class="dialog-content" >
<!--                <form class="form-horizontal form-bordered"  [formGroup]="loginForm">-->
                    <div class="form-group" >
                        <mat-label >Name</mat-label >
                        <mat-form-field appearance="outline" >
                            <input matInput [(ngModel)]="teams" disabled="{{teams.length > 0}}">
                        </mat-form-field >
                    </div >

                    <div class="form-group mb-4">
                        <mat-label>Supervisor(s)</mat-label >
                        <div class="multi-select-options form-control">
                            <angular2-multiselect
                                    [data]="dropdownList"
                                    [(ngModel)]="selectedSupervisor"
                                    [settings]="dropdownSettings"
                                    [ngModelOptions]="{ standalone: true }"
                                    (onSelect)="onItemSelect($event)"
                                    (onDeSelect)="OnItemDeSelect($event)"
                                    (onSelectAll)="onSelectAll($event)"
                                    (onDeSelectAll)="onDeSelectAll($event)">
                                <c-badge>
                                    <ng-template let-item="item">
                                        <label class="item-name">{{ item.supervisor }}</label>
                                    </ng-template>
                                </c-badge>
                                <c-item>
                                    <ng-template let-item="item">
                                        <label class="item-list-name">{{ item.supervisor }}</label>
                                    </ng-template>
                                </c-item>
                            </angular2-multiselect>
                        </div>


                    </div >

                <div class="form-group mb-4">
                    <mat-label>Secondary Supervisor(s)</mat-label >
                    <div class="multi-select-options form-control">
                        <angular2-multiselect
                                [data]="dropdownList"
                                [(ngModel)]="selectedSupervisor"
                                [settings]="dropdownSettings"
                                [ngModelOptions]="{ standalone: true }"
                                (onSelect)="onItemSelect($event)"
                                (onDeSelect)="OnItemDeSelect($event)"
                                (onSelectAll)="onSelectAll($event)"
                                (onDeSelectAll)="onDeSelectAll($event)">
                            <c-badge>
                                <ng-template let-item="item">
                                    <label class="item-name">{{ item.supervisor }}</label>
                                </ng-template>
                            </c-badge>
                            <c-item>
                                <ng-template let-item="item">
                                    <label class="item-list-name">{{ item.supervisor }}</label>
                                </ng-template>
                            </c-item>
                        </angular2-multiselect>
                    </div>


                </div >


                <div class="form-group" >
                    <mat-label>Add agent(s) from list</mat-label >
                    <div class="multi-select-options form-control">
                        <angular2-multiselect
                                [data]="dropdownList"
                                [(ngModel)]="selectedAgent"
                                [settings]="dropdownSettings"
                                [ngModelOptions]="{ standalone: true }"
                                (onSelect)="onItemSelect($event)"
                                (onDeSelect)="OnItemDeSelect($event)"
                                (onSelectAll)="onSelectAll($event)"
                                (onDeSelectAll)="onDeSelectAll($event)">
                            <c-badge>
                                <ng-template let-item="item">
                                    <label class="item-name">{{ item.agentName }}</label>
                                </ng-template>
                            </c-badge>
                            <c-item>
                                <ng-template let-item="item">
                                    <label class="item-list-name">{{ item.agentName }}</label>
                                </ng-template>
                            </c-item>
                        </angular2-multiselect>
                    </div>


                </div >
                    <div class="template-action row" >
                        <div class="col-md-12" >
                            <div class="form-action-area" >
                                <button (click)="onClose()" class="gray-btn" mat-raised-button >Cancel</button >
                                <button class="blue-btn service-trigger"
                                        mat-raised-button >{{saveBtnText}}</button >
                            </div >
                        </div >
                    </div >
<!--                </form >-->
            </div >
        </div >
    </ng-template >
</div>